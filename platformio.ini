[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600
; Detecta el puerto automáticamente en cualquier SO
; upload_port = COM7
; monitor_port = COM7
lib_deps =
  bblanchon/ArduinoJson @ ^6.21.3

; Inyecta valores por defecto desde .env (raíz del repo) o variables de entorno
extra_scripts = pre:pre_build_env.py

; Alternativamente, puedes forzar defines manuales (opcional):
build_flags =
  ; URL del backend por defecto (HTTPS)
  -DDEFAULT_SERVER_URL=\"https://proyecto.bisonbyte.io\"
  ; AP de configuración (portal) con credenciales aleatorias
  -DAP_SSID=\"BB-Setup-3082\"
  -DAP_PASS=\"K4n9T1xQ7wZ3\"
  ; Forzar que el firmware importe estos valores al arranque (ignora NVS previa)
  -DOVERRIDE_NVS_WITH_DEFAULTS=1

; Si la detección automática falla, comenta las líneas anteriores y
; configura manualmente el puerto, p. ej.:
;   En Linux/Mac:  upload_port = /dev/ttyUSB0   (o /dev/tty.SLAB_USBtoUART)
;   En Windows:    upload_port = COM7
; Puedes pasar el puerto por CLI: pio run -t upload --upload-port /dev/ttyUSB0
